{"version":3,"sources":["webpack:///view-selector2.js","webpack:///webpack/bootstrap d174118c06f57b4bedd7?303c*","webpack:///C:/myGitRepos/ga-dev-tools/src/javascript/embed-api/components/view-selector2.js","webpack:///./~/javascript-api-utils/lib/account-summaries/index.js","webpack:///./~/javascript-api-utils/lib/account-summaries/account-summaries.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_javascriptApiUtilsLibAccountSummaries","_javascriptApiUtilsLibAccountSummaries2","gapi","analytics","ready","updateSelect","select","options","innerHTML","map","option","selected","name","join","getIdProp","opts","ids","viewId","prop","value","replace","propertyId","accountId","createComponent","execute","this","setup_","updateAccounts_","changed_","render_","onChange_","bind","set","Error","container","prevOpts","get","Component","prototype","cb","onAuthorize","then","summaries","self","accounts","all","err","emit","auth","isAuthorized","on","view","account","property","getProfile","getAccountByProfileId","getWebPropertyByProfileId","getWebProperty","getAccountByWebPropertyId","views","getAccount","properties","slice","document","getElementById","template","selects","querySelectorAll","onchange","onUserSelect_","props","data","requestAccountSummaries","promise","client","request","path","API_PATH","resp","constructor","resolve","reject","fn","result","items","concat","startIndex","itemsPerPage","totalResults","params","start-index","AccountSummaries","cache","noCache","accounts_","webProperties_","profiles_","accountsById_","webPropertiesById_","propertiesById_","profilesById_","viewsById_","i","webProperties","alias","webProperty","j","push","parent","profiles","profile","k","grandParent","object","referenceProp","aliasName","Object","defineProperty","allWebProperties","allProfiles","webPropertyId","profileId"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDMM,SAASI,EAAQD,EAASH,GAkB/B,YAEA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,GAAIG,GAAyCf,EEjDjB,GFuDxBgB,EAA0CL,EAAuBI,EElDtEE,MAAKC,UAAUC,MAAM,WAiRnB,QAASC,GAAaC,EAAQC,EAASjB,GACrCgB,EAAOE,UAAYD,EAAQE,IAAI,SAASC,GACtC,GAAIC,GAAWD,EAAOpB,IAAMA,EAAK,YAAc,GAC/C,OAAO,WAAaqB,EAAW,UAAYD,EAAOpB,GAAK,KACnDoB,EAAOE,KAAO,cACjBC,KAAK,IAaV,QAASC,GAAUC,GACjB,MAAIA,GAAKC,KAAOD,EAAKE,QACXC,KAAM,SAAUC,MAAOJ,EAAKE,QAC/BF,EAAKC,KAAOD,EAAKC,IAAII,QAAQ,OAAQ,KAEnCL,EAAKM,YACJH,KAAM,aAAcC,MAAOJ,EAAKM,YAEjCN,EAAKO,WACJJ,KAAM,YAAaC,MAAOJ,EAAKO,WADpC,OAzSPpB,KAAKC,UAAUoB,gBAAgB,iBAO7BC,QAAS,WASP,MARAC,MAAKC,OAAO,WACVD,KAAKE,kBACDF,KAAKG,WACPH,KAAKI,UACLJ,KAAKK,cAEPC,KAAKN,OAEAA,MAUTO,IAAK,SAASjB,GAEZ,KAAMA,EAAKC,MACLD,EAAKE,SACLF,EAAKM,aACLN,EAAKO,UAAY,EAErB,KAAM,IAAIW,OAAM,wGAIlB,IAAIlB,EAAKmB,WAAaT,KAAKS,UACzB,KAAM,IAAID,OAAM,mFAIlB,IAAIE,GAAWV,KAAKW,KAkBpB,QAhBID,EAASnB,KAAOD,EAAKC,KACrBmB,EAASlB,QAAUF,EAAKE,QACxBkB,EAASd,YAAcN,EAAKM,YAC5Bc,EAASb,WAAaP,EAAKO,aAM7Ba,EAASnB,IAAM,KACfmB,EAASlB,OAAS,KAClBkB,EAASd,WAAa,KACtBc,EAASb,UAAY,MAIhBpB,KAAKC,UAAUkC,UAAUC,UAAUN,IAAIxC,KAAKiC,KAAMV,IAW3DW,OAAQ,SAASa,GAGf,QAASC,KACPvC,EAAA,WAAiBmC,MAAMK,KACrB,SAASC,GACPC,EAAKD,UAAYA,EACjBC,EAAKC,SAAWD,EAAKD,UAAUG,MAC/BN,KAEF,SAASO,GACPH,EAAKI,KAAK,QAASD,KAVzB,GAAIH,GAAOlB,IAePvB,MAAKC,UAAU6C,KAAKC,eACtBT,IAGAtC,KAAKC,UAAU6C,KAAKE,GAAG,UAAWV,IAUtCb,gBAAiB,WAEf,GAEIwB,GAAMC,EAASC,EAFftC,EAAOU,KAAKW,MACZpB,EAAMF,EAAUC,EAIpB,IAAKC,EAMH,OAAQA,EAAIE,MACV,IAAK,SACHiC,EAAO1B,KAAKiB,UAAUY,WAAWtC,EAAIG,OACrCiC,EAAU3B,KAAKiB,UAAUa,sBAAsBvC,EAAIG,OACnDkC,EAAW5B,KAAKiB,UAAUc,0BAA0BxC,EAAIG,MACxD,MACF,KAAK,aACHkC,EAAW5B,KAAKiB,UAAUe,eAAezC,EAAIG,OAC7CiC,EAAU3B,KAAKiB,UAAUgB,0BAA0B1C,EAAIG,OACvDgC,EAAOE,GAAYA,EAASM,OAASN,EAASM,MAAM,EACpD,MACF,KAAK,YACHP,EAAU3B,KAAKiB,UAAUkB,WAAW5C,EAAIG,OACxCkC,EAAWD,GAAWA,EAAQS,YAAcT,EAAQS,WAAW,GAC/DV,EAAOE,GAAYA,EAASM,OAASN,EAASM,MAAM,OAnBxDP,GAAU3B,KAAKmB,SAAS,GACxBS,EAAWD,GAAWA,EAAQS,YAAcT,EAAQS,WAAW,GAC/DV,EAAOE,GAAYA,EAASM,OAASN,EAASM,MAAM,EAsBlDP,IAAWC,GAAYF,GAGrBC,GAAW3B,KAAK2B,SAChBC,GAAY5B,KAAK4B,UACjBF,GAAQ1B,KAAK0B,QAGf1B,KAAKG,UACHwB,QAASA,GAAWA,GAAW3B,KAAK2B,QACpCC,SAAUA,GAAYA,GAAY5B,KAAK4B,SACvCF,KAAMA,GAAQA,GAAQ1B,KAAK0B,MAG7B1B,KAAK2B,QAAUA,EACf3B,KAAKoC,WAAaT,EAAQS,WAC1BpC,KAAK4B,SAAWA,EAChB5B,KAAKkC,MAAQN,GAAYA,EAASM,MAClClC,KAAK0B,KAAOA,EACZ1B,KAAKT,IAAMmC,GAAQ,MAAQA,EAAK7D,IAIlCmC,KAAKsB,KAAK,QAAS,GAAId,OAAM,6BACzBjB,EAAIE,KAAK4C,MAAM,EAAG,IAAM,MAAQ9C,EAAIG,SAS5CU,QAAS,WAEP,GAAId,GAAOU,KAAKW,KAEhBX,MAAKS,UAAqC,gBAAlBnB,GAAKmB,UACzB6B,SAASC,eAAejD,EAAKmB,WAAanB,EAAKmB,UAEnDT,KAAKS,UAAU1B,UAAYO,EAAKkD,UAAYxC,KAAKwC,QACjD,IAAIC,GAAUzC,KAAKS,UAAUiC,iBAAiB,UAE1CvB,EAAWnB,KAAKmB,SAChBiB,EAAapC,KAAKoC,cAAgBjD,KAAM,UAAWtB,GAAI,KACvDqE,EAAQlC,KAAKkC,SAAW/C,KAAM,UAAWtB,GAAI,IAEjDe,GAAa6D,EAAQ,GAAItB,EAAUnB,KAAK2B,QAAQ9D,IAChDe,EAAa6D,EAAQ,GAAIL,EAAYpC,KAAK4B,UAAY5B,KAAK4B,SAAS/D,IACpEe,EAAa6D,EAAQ,GAAIP,EAAOlC,KAAK0B,MAAQ1B,KAAK0B,KAAK7D,IAEvD4E,EAAQ,GAAGE,SACP3C,KAAK4C,cAActC,KAAKN,KAAMyC,EAAQ,GAAI,aAC9CA,EAAQ,GAAGE,SACP3C,KAAK4C,cAActC,KAAKN,KAAMyC,EAAQ,GAAI,cAC9CA,EAAQ,GAAGE,SACP3C,KAAK4C,cAActC,KAAKN,KAAMyC,EAAQ,GAAI,WAShDpC,UAAW,WAET,GAAIwC,IACFlB,QAAS3B,KAAK2B,QACdC,SAAU5B,KAAK4B,SACfF,KAAM1B,KAAK0B,KACXnC,IAAKS,KAAK0B,MAAQ,MAAQ1B,KAAK0B,KAAK7D,GAGlCmC,MAAKG,WACHH,KAAKG,SAASwB,SAAS3B,KAAKsB,KAAK,gBAAiBuB,GAClD7C,KAAKG,SAASyB,UAAU5B,KAAKsB,KAAK,iBAAkBuB,GACpD7C,KAAKG,SAASuB,OAChB1B,KAAKsB,KAAK,aAAcuB,GACxB7C,KAAKsB,KAAK,YAAauB,GAGvB7C,KAAKsB,KAAK,SAAUuB,EAAMtD,OAI9BS,KAAKG,SAAW,MAUlByC,cAAe,SAAS/D,EAAQ+C,GAC9B,GAAIkB,KACJA,GAAKlB,GAAY/C,EAAOa,MAExBM,KAAKO,IAAIuC,GACT9C,KAAKD,WAUPyC,SACE,wWFuEA,SAAS5E,EAAQD,EAASH,GG/ShC,QAAAuF,KAEA,GAAAC,GAAAvE,KAAAwE,OAAAC,SAAqCC,KAAAC,IAIrCpC,KAAA,SAAAqC,GAA4B,MAAAA,IAE5B,WAAAL,GAAAM,YAAA,SAAAC,EAAAC,GAIA,GAAAvC,KAEA+B,GAAAhC,KAAA,QAAAyC,GAAAJ,GACA,GAAAK,GAAAL,EAAAK,MACAA,GAAAC,MACA1C,IAAA2C,OAAAF,EAAAC,OAGAH,EAAA,GAAAhD,OAAA,iGAIAkD,EAAAG,WAAAH,EAAAI,cAAAJ,EAAAK,aACAtF,KAAAwE,OAAAC,SACAC,KAAAC,EACAY,QACAC,cAAAP,EAAAG,WAAAH,EAAAI,gBAIA9C,KAAAyC,GAGAF,EAAA,GAAAW,GAAAjD,MAIAD,KAAA,KAAAwC,KA3DA,GAUAW,GAVAD,EAAA1G,EAAA,GAGA4F,EAAA,2CAmEAxF,GAAAD,SAWAgD,IAAA,SAAAyD,GAEA,MADAA,KAAAD,EAAA,MACAA,MAAApB,QH6VM,SAASnF,EAAQD,GIzZvB,QAAAuG,GAAA/C,GAEAnB,KAAAqE,UAAAlD,EACAnB,KAAAsE,kBACAtE,KAAAuE,aAEAvE,KAAAwE,iBACAxE,KAAAyE,mBAAAzE,KAAA0E,mBACA1E,KAAA2E,cAAA3E,KAAA4E,aAEA,QAAAjD,GAAAkD,EAAA,EAA0BlD,EAAA3B,KAAAqE,UAAAQ,GAA6BA,IAMvD,GAJA7E,KAAAwE,cAAA7C,EAAA9D,KACAqD,KAAAS,GAGAA,EAAAmD,cAAA,CAGAC,EAAApD,EAAA,6BAEA,QAAAqD,GAAAC,EAAA,EAAgCD,EAAArD,EAAAmD,cAAAG,GAAwCA,IAQxE,GANAjF,KAAAsE,eAAAY,KAAAF,GACAhF,KAAAyE,mBAAAO,EAAAnH,KACAqD,KAAA8D,EACAG,OAAAxD,GAGAqD,EAAAI,SAAA,CAGAL,EAAAC,EAAA,mBAEA,QAAAK,GAAAC,EAAA,EAA8BD,EAAAL,EAAAI,SAAAE,GAAmCA,IAEjEtF,KAAAuE,UAAAW,KAAAG,GACArF,KAAA2E,cAAAU,EAAAxH,KACAqD,KAAAmE,EACAF,OAAAH,EACAO,YAAA5D,KAsKA,QAAAoD,GAAAS,EAAAC,EAAAC,GACAC,OAAAC,eACAD,OAAAC,eAAAJ,EAAAE,GACA/E,IAAA,WACA,MAAA6E,GAAAC,MAKAD,EAAAE,GAAAF,EAAAC,GAjKAvB,EAAArD,UAAAO,IAAA,WACA,MAAApB,MAAAqE,WAGAU,EAAAb,EAAArD,UAAA,MACA,eAOAqD,EAAArD,UAAAgF,iBAAA,WACA,MAAA7F,MAAAsE,gBAGAS,EAAAb,EAAArD,UAAA,mBACA,iBAOAqD,EAAArD,UAAAiF,YAAA,WACA,MAAA9F,MAAAuE,WAGAQ,EAAAb,EAAArD,UAAA,cACA,YAgBAqD,EAAArD,UAAAF,IAAA,SAAAvC,GACA,KAAAA,EAAAyB,YACAzB,EAAA2H,gBACA3H,EAAAwB,aACAxB,EAAA4H,YACA5H,EAAAoB,OAAA,EAEA,SAAAgB,OAAA,kIAIA,OAAAR,MAAA6B,WAAAzD,EAAA4H,WAAA5H,EAAAoB,SACAQ,KAAAgC,eAAA5D,EAAA2H,eAAA3H,EAAAwB,aACAI,KAAAmC,WAAA/D,EAAAyB,YASAqE,EAAArD,UAAAsB,WAAA,SAAAtC,GACA,MAAAG,MAAAwE,cAAA3E,IACAG,KAAAwE,cAAA3E,GAAAqB,MASAgD,EAAArD,UAAAmB,eAAA,SAAA+D,GACA,MAAA/F,MAAAyE,mBAAAsB,IACA/F,KAAAyE,mBAAAsB,GAAA7E,MAGA6D,EAAAb,EAAArD,UAAA,iBACA,eAQAqD,EAAArD,UAAAgB,WAAA,SAAAmE,GACA,MAAAhG,MAAA2E,cAAAqB,IACAhG,KAAA2E,cAAAqB,GAAA9E,MAGA6D,EAAAb,EAAArD,UAAA,aACA,WAQAqD,EAAArD,UAAAiB,sBAAA,SAAAkE,GACA,MAAAhG,MAAA2E,cAAAqB,IACAhG,KAAA2E,cAAAqB,GAAAT,aAIAR,EAAAb,EAAArD,UAAA,wBACA,sBASAqD,EAAArD,UAAAkB,0BAAA,SAAAiE,GACA,MAAAhG,MAAA2E,cAAAqB,IACAhG,KAAA2E,cAAAqB,GAAAb,QAGAJ,EAAAb,EAAArD,UAAA,4BACA,uBAQAqD,EAAArD,UAAAoB,0BAAA,SAAA8D,GACA,MAAA/F,MAAAyE,mBAAAsB,IACA/F,KAAAyE,mBAAAsB,GAAAZ,QAGAJ,EAAAb,EAAArD,UAAA,4BACA,0BAwBAjD,EAAAD,QAAAuG","file":"view-selector2.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Copyright 2014 Google Inc. All rights reserved.\n\t//\n\t// Licensed under the Apache License, Version 2.0 (the \"License\");\n\t// you may not use this file except in compliance with the License.\n\t// You may obtain a copy of the License at\n\t//\n\t//     http://www.apache.org/licenses/LICENSE-2.0\n\t//\n\t// Unless required by applicable law or agreed to in writing, software\n\t// distributed under the License is distributed on an \"AS IS\" BASIS,\n\t// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t// See the License for the specific language governing permissions and\n\t// limitations under the License.\n\t\n\t/* global gapi */\n\t\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _javascriptApiUtilsLibAccountSummaries = __webpack_require__(1);\n\t\n\t/**\r\n\t * A ViewSelector2 component for the Embed API.\r\n\t */\n\t\n\tvar _javascriptApiUtilsLibAccountSummaries2 = _interopRequireDefault(_javascriptApiUtilsLibAccountSummaries);\n\t\n\tgapi.analytics.ready(function () {\n\t\n\t  gapi.analytics.createComponent('ViewSelector2', {\n\t\n\t    /**\r\n\t     * Render the view selector instance on the page or update an existing\r\n\t     * instance if any options have changed.\r\n\t     * @return {ViewSelector2} The instance.\r\n\t     */\n\t    execute: function execute() {\n\t      this.setup_((function () {\n\t        this.updateAccounts_();\n\t        if (this.changed_) {\n\t          this.render_();\n\t          this.onChange_();\n\t        }\n\t      }).bind(this));\n\t\n\t      return this;\n\t    },\n\t\n\t    /**\r\n\t     * Extend the base `set` function with some error checking and handling of\r\n\t     * ID data.\r\n\t     * @extends gapi.analytics.Component.prototype.set\r\n\t     * @param {Object} opts The options to set.\r\n\t     * @return {ViewSelector2}\r\n\t     */\n\t    set: function set(opts) {\n\t\n\t      if (!!opts.ids + !!opts.viewId + !!opts.propertyId + !!opts.accountId > 1) {\n\t\n\t        throw new Error('You cannot specify more than one of the following ' + 'options: \"ids\", \"viewId\", \"accountId\", \"propertyId\"');\n\t      }\n\t\n\t      if (opts.container && this.container) {\n\t        throw new Error('You cannot change containers once a view selector ' + 'has been rendered on the page.');\n\t      }\n\t\n\t      var prevOpts = this.get();\n\t\n\t      if (prevOpts.ids != opts.ids || prevOpts.viewId != opts.viewId || prevOpts.propertyId != opts.propertyId || prevOpts.accountId != opts.accountId) {\n\t\n\t        // If new ID data is being set, first unset all existing ID data.\n\t        // This prevents the problem where you set an account ID then set a\n\t        // view ID for a new view in a different account. Both IDs should not\n\t        // persist or there will be problems.\n\t        prevOpts.ids = null;\n\t        prevOpts.viewId = null;\n\t        prevOpts.propertyId = null;\n\t        prevOpts.accountId = null;\n\t      }\n\t\n\t      // Call super.\n\t      return gapi.analytics.Component.prototype.set.call(this, opts);\n\t    },\n\t\n\t    /**\r\n\t     * Set up the view selector instance with values from the Management API's\r\n\t     * accountSummaries.list method via the `accountSummaries` module.\r\n\t     * If the user has not authorized, wait until that happens before\r\n\t     * requesting the account summaries.\r\n\t     * @param {Function} cb A function to be invoked once authorization has\r\n\t     *     succeeded and the accountSummaries have been retrieved.\r\n\t     */\n\t    setup_: function setup_(cb) {\n\t      var self = this;\n\t\n\t      function onAuthorize() {\n\t        _javascriptApiUtilsLibAccountSummaries2['default'].get().then(function (summaries) {\n\t          self.summaries = summaries;\n\t          self.accounts = self.summaries.all();\n\t          cb();\n\t        }, function (err) {\n\t          self.emit('error', err);\n\t        });\n\t      }\n\t\n\t      if (gapi.analytics.auth.isAuthorized()) {\n\t        onAuthorize();\n\t      } else {\n\t        gapi.analytics.auth.on('success', onAuthorize);\n\t      }\n\t    },\n\t\n\t    /**\r\n\t     * Update the view selector instance properties with new account\r\n\t     * information.\r\n\t     * @throws {Error} If the user has set an ID value for an account they\r\n\t     *     don't have access to.\r\n\t     */\n\t    updateAccounts_: function updateAccounts_() {\n\t\n\t      var opts = this.get();\n\t      var ids = getIdProp(opts);\n\t      var view, account, property;\n\t\n\t      // If there are no id props, set the defaults.\n\t      if (!ids) {\n\t        account = this.accounts[0];\n\t        property = account && account.properties && account.properties[0];\n\t        view = property && property.views && property.views[0];\n\t      } else {\n\t        switch (ids.prop) {\n\t          case 'viewId':\n\t            view = this.summaries.getProfile(ids.value);\n\t            account = this.summaries.getAccountByProfileId(ids.value);\n\t            property = this.summaries.getWebPropertyByProfileId(ids.value);\n\t            break;\n\t          case 'propertyId':\n\t            property = this.summaries.getWebProperty(ids.value);\n\t            account = this.summaries.getAccountByWebPropertyId(ids.value);\n\t            view = property && property.views && property.views[0];\n\t            break;\n\t          case 'accountId':\n\t            account = this.summaries.getAccount(ids.value);\n\t            property = account && account.properties && account.properties[0];\n\t            view = property && property.views && property.views[0];\n\t            break;\n\t        }\n\t      }\n\t\n\t      if (account || property || view) {\n\t\n\t        // Only update if something has changed.\n\t        if (account != this.account || property != this.property || view != this.view) {\n\t\n\t          // Store what value changed.\n\t          this.changed_ = {\n\t            account: account && account != this.account,\n\t            property: property && property != this.property,\n\t            view: view && view != this.view\n\t          };\n\t\n\t          this.account = account;\n\t          this.properties = account.properties;\n\t          this.property = property;\n\t          this.views = property && property.views;\n\t          this.view = view;\n\t          this.ids = view && 'ga:' + view.id;\n\t        }\n\t      } else {\n\t        this.emit('error', new Error('You do not have access to ' + ids.prop.slice(0, -2) + ' : ' + ids.value));\n\t      }\n\t    },\n\t\n\t    /**\r\n\t     * Render the view selector based on the users accounts and the\r\n\t     * pre-defined template. Also add event handlers to watch for\r\n\t     * changes.\r\n\t     */\n\t    render_: function render_() {\n\t\n\t      var opts = this.get();\n\t\n\t      this.container = typeof opts.container == 'string' ? document.getElementById(opts.container) : opts.container;\n\t\n\t      this.container.innerHTML = opts.template || this.template;\n\t      var selects = this.container.querySelectorAll('select');\n\t\n\t      var accounts = this.accounts;\n\t      var properties = this.properties || [{ name: '(Empty)', id: '' }];\n\t      var views = this.views || [{ name: '(Empty)', id: '' }];\n\t\n\t      updateSelect(selects[0], accounts, this.account.id);\n\t      updateSelect(selects[1], properties, this.property && this.property.id);\n\t      updateSelect(selects[2], views, this.view && this.view.id);\n\t\n\t      selects[0].onchange = this.onUserSelect_.bind(this, selects[0], 'accountId');\n\t      selects[1].onchange = this.onUserSelect_.bind(this, selects[1], 'propertyId');\n\t      selects[2].onchange = this.onUserSelect_.bind(this, selects[2], 'viewId');\n\t    },\n\t\n\t    /**\r\n\t     * A callback that is invoked from the `execute` method whenever the ID\r\n\t     * data has changed. Most of the time this change happens when the user\r\n\t     * has selected a new view in the UI, but it can also happen\r\n\t     * programmatically via the `set` method.\r\n\t     */\n\t    onChange_: function onChange_() {\n\t\n\t      var props = {\n\t        account: this.account,\n\t        property: this.property,\n\t        view: this.view,\n\t        ids: this.view && 'ga:' + this.view.id\n\t      };\n\t\n\t      if (this.changed_) {\n\t        if (this.changed_.account) this.emit('accountChange', props);\n\t        if (this.changed_.property) this.emit('propertyChange', props);\n\t        if (this.changed_.view) {\n\t          this.emit('viewChange', props);\n\t          this.emit('idsChange', props);\n\t\n\t          // For backwards compatibility with the original ViewSelector.\n\t          this.emit('change', props.ids);\n\t        }\n\t      }\n\t\n\t      this.changed_ = null;\n\t    },\n\t\n\t    /**\r\n\t     * The handler assigned to the `onchange` method of each of the select\r\n\t     * elements. The context is bound to the view selector instance and it is\r\n\t     * invoked with the element and property as its arguments.\r\n\t     * @param {HTMLSelectElement} select The select element.\r\n\t     * @param {string} property The property key to be set on the instance.\r\n\t     */\n\t    onUserSelect_: function onUserSelect_(select, property) {\n\t      var data = {};\n\t      data[property] = select.value;\n\t\n\t      this.set(data);\n\t      this.execute();\n\t    },\n\t\n\t    /**\r\n\t     * The html structure used to build the component. Developers can override\r\n\t     * this by passing it to the component constructor.  The only requirement\r\n\t     * is that the structure contain three selects.  The first will be the\r\n\t     * account select, the second will be the property select, and the third\r\n\t     * will be the view select. Order is important.\r\n\t     */\n\t    template: '<div class=\"ViewSelector2\">' + '  <div class=\"ViewSelector2-item\">' + '    <label>Account</label>' + '    <select class=\"FormField\"></select>' + '  </div>' + '  <div class=\"ViewSelector2-item\">' + '    <label>Property</label>' + '    <select class=\"FormField\"></select>' + '  </div>' + '  <div class=\"ViewSelector2-item\">' + '    <label>View</label>' + '    <select class=\"FormField\"></select>' + '  </div>' + '</div>'\n\t  });\n\t\n\t  /**\r\n\t   * Update a select with the specified options and optionally choose the\r\n\t   * selected option based on the matching ID.\r\n\t   * @param {HTMLSelectElement} select The select element to update.\r\n\t   * @param {Array} options An Array of objects with the keys\r\n\t   *     `name` and `id`.\r\n\t   * @param {string} [id] An optional value used to determine the selected\r\n\t   *     option.\r\n\t   */\n\t  function updateSelect(select, options, id) {\n\t    select.innerHTML = options.map(function (option) {\n\t      var selected = option.id == id ? 'selected ' : ' ';\n\t      return '<option ' + selected + 'value=\"' + option.id + '\">' + option.name + '</option>';\n\t    }).join('');\n\t  }\n\t\n\t  /**\r\n\t   * Given an options object containing a single key that could be either\r\n\t   * \"ids\", \"viewId\", \"propertyId\", or \"accountId\", return a new object\r\n\t   * specifying that key in its `prop` property. If the passed property is\r\n\t   * \"ids\" convert it to \"viewId\".\r\n\t   * @param {Object} opts An options object.\r\n\t   * @return {Object} An object specifying what ID property and value were\r\n\t   *     passed.\r\n\t   */\n\t  function getIdProp(opts) {\n\t    if (opts.ids || opts.viewId) {\n\t      return { prop: 'viewId', value: opts.viewId || opts.ids && opts.ids.replace(/^ga:/, '') };\n\t    } else if (opts.propertyId) {\n\t      return { prop: 'propertyId', value: opts.propertyId };\n\t    } else if (opts.accountId) {\n\t      return { prop: 'accountId', value: opts.accountId };\n\t    }\n\t  }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Copyright 2015 Google Inc. All rights reserved.\r\n\t//\r\n\t// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n\t// you may not use this file except in compliance with the License.\r\n\t// You may obtain a copy of the License at\r\n\t//\r\n\t//     http://www.apache.org/licenses/LICENSE-2.0\r\n\t//\r\n\t// Unless required by applicable law or agreed to in writing, software\r\n\t// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n\t// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n\t// See the License for the specific language governing permissions and\r\n\t// limitations under the License.\r\n\t\r\n\t\r\n\t/* global gapi */\r\n\t\r\n\tvar AccountSummaries = __webpack_require__(2);\r\n\t\r\n\t\r\n\tvar API_PATH = '/analytics/v3/management/accountSummaries';\r\n\t\r\n\t\r\n\t/**\r\n\t * Store the accountSummaries result in a promise so the API isn't\r\n\t * queried unneccesarily.\r\n\t */\r\n\tvar cache;\r\n\t\r\n\t\r\n\t/**\r\n\t * Make a request to the Management API's accountSummaries#list method.\r\n\t * If the requests returns a partial, paginated response, query again\r\n\t * until the full summaries are retrieved.\r\n\t * @return {goog.Promise} A promise that will be resolved with an\r\n\t *     AccountSummaries instance.\r\n\t */\r\n\tfunction requestAccountSummaries() {\r\n\t\r\n\t  var promise = gapi.client.request({path: API_PATH})\r\n\t      // An extra `then` is needed here because `.list` doesn't return a\r\n\t      // \"real\" promise, just a thenable. Calling `.then` gets us access\r\n\t      // to the underlying goog.Promise instance and thus its constructor.\r\n\t      .then(function(resp) { return resp; });\r\n\t\r\n\t  return new promise.constructor(function(resolve, reject) {\r\n\t\r\n\t    // Store the summaries array in the closure so multiple requests can\r\n\t    // concat to it.\r\n\t    var summaries = [];\r\n\t\r\n\t    promise.then(function fn(resp) {\r\n\t      var result = resp.result;\r\n\t      if (result.items) {\r\n\t        summaries = summaries.concat(result.items);\r\n\t      }\r\n\t      else {\r\n\t        reject(new Error('You do not have any Google Analytics accounts. ' +\r\n\t            'Go to http://google.com/analytics to sign up.'));\r\n\t      }\r\n\t\r\n\t      if (result.startIndex + result.itemsPerPage <= result.totalResults) {\r\n\t        gapi.client.request({\r\n\t          path: API_PATH,\r\n\t          params: {\r\n\t            'start-index': result.startIndex + result.itemsPerPage\r\n\t          }\r\n\t        })\r\n\t        // Recursively call this function until the full results are in.\r\n\t        .then(fn);\r\n\t      }\r\n\t      else {\r\n\t        resolve(new AccountSummaries(summaries));\r\n\t      }\r\n\t    })\r\n\t    // Reject the promise if there are any uncaught errors;\r\n\t    .then(null, reject);\r\n\t  });\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * @module accountSummaries\r\n\t *\r\n\t * This module requires the `gapi.client` library to be loaded on the page\r\n\t * and the user to be authenticated.\r\n\t */\r\n\tmodule.exports = {\r\n\t\r\n\t  /**\r\n\t   * Return the `requestAccountSummaries` promise. If the promise exists,\r\n\t   * return it to avoid multiple requests. If the promise does not exist,\r\n\t   * initiate the request and cache the promise.\r\n\t   *\r\n\t   * @param {boolean} noCache When true make a request no matter what.\r\n\t   * @return {goog.Promise} A promise fulfilled with an AccountSummaries\r\n\t   *     instance.\r\n\t   */\r\n\t  get: function(noCache) {\r\n\t    if (noCache) cache = null;\r\n\t    return cache || (cache = requestAccountSummaries());\r\n\t  }\r\n\t};\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t// Copyright 2015 Google Inc. All rights reserved.\r\n\t//\r\n\t// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n\t// you may not use this file except in compliance with the License.\r\n\t// You may obtain a copy of the License at\r\n\t//\r\n\t//     http://www.apache.org/licenses/LICENSE-2.0\r\n\t//\r\n\t// Unless required by applicable law or agreed to in writing, software\r\n\t// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n\t// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n\t// See the License for the specific language governing permissions and\r\n\t// limitations under the License.\r\n\t\r\n\t\r\n\t/**\r\n\t * @constuctor AccountSummaries\r\n\t *\r\n\t * Takes an array of accounts and writes the following new properties:\r\n\t * `accounts_`, `webProperties_`, `profiles_`, `accountsById_`,\r\n\t * `webPropertiesById_`, and `profilesById_`.\r\n\t * Each of the ___ById properties contains an array of objects where the\r\n\t * key is the entity ID and the value is an object containing the entity and\r\n\t * the entity's parents. For example, an object in the `profilesById_` array\r\n\t * might look like this:\r\n\t *     {\r\n\t *       \"1234\": {\r\n\t *         self: {...},\r\n\t *         parent: {...},\r\n\t *         grandParent: {...}\r\n\t *       }\r\n\t *     }\r\n\t *\r\n\t * It also aliases the properties `webProperties` to `properties` and\r\n\t * `profiles` to `views` within the `accounts` array tree.\r\n\t\r\n\t * @param {Array} accounts A list of accounts in the format returned by the\r\n\t *     management API's accountSummaries#list method.\r\n\t * @returns {AccountSummaries}\r\n\t */\r\n\tfunction AccountSummaries(accounts) {\r\n\t\r\n\t  this.accounts_ = accounts;\r\n\t  this.webProperties_ = [];\r\n\t  this.profiles_ = [];\r\n\t\r\n\t  this.accountsById_ = {};\r\n\t  this.webPropertiesById_ = this.propertiesById_ = {};\r\n\t  this.profilesById_ = this.viewsById_ = {};\r\n\t\r\n\t  for (var i = 0, account; account = this.accounts_[i]; i++) {\r\n\t\r\n\t    this.accountsById_[account.id] = {\r\n\t      self: account\r\n\t    };\r\n\t\r\n\t    if (!account.webProperties) continue;\r\n\t\r\n\t    // Add aliases.\r\n\t    alias(account, 'webProperties', 'properties');\r\n\t\r\n\t    for (var j = 0, webProperty; webProperty = account.webProperties[j]; j++) {\r\n\t\r\n\t      this.webProperties_.push(webProperty);\r\n\t      this.webPropertiesById_[webProperty.id] = {\r\n\t        self: webProperty,\r\n\t        parent: account\r\n\t      };\r\n\t\r\n\t      if (!webProperty.profiles) continue;\r\n\t\r\n\t      // Add aliases.\r\n\t      alias(webProperty, 'profiles', 'views');\r\n\t\r\n\t      for (var k = 0, profile; profile = webProperty.profiles[k]; k++) {\r\n\t\r\n\t        this.profiles_.push(profile);\r\n\t        this.profilesById_[profile.id] = {\r\n\t          self: profile,\r\n\t          parent: webProperty,\r\n\t          grandParent: account\r\n\t        };\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Return a list of all accounts this user has access to.\r\n\t * Since the accounts contain the web properties and the web properties contain\r\n\t * the profiles, this list contains everything.\r\n\t * @return {Array}\r\n\t */\r\n\tAccountSummaries.prototype.all = function() {\r\n\t  return this.accounts_;\r\n\t};\r\n\t\r\n\talias(AccountSummaries.prototype, 'all',\r\n\t                                  'allAccounts');\r\n\t\r\n\t\r\n\t/**\r\n\t * Return a list of all web properties this user has access to.\r\n\t * @return {Array}\r\n\t */\r\n\tAccountSummaries.prototype.allWebProperties = function() {\r\n\t  return this.webProperties_;\r\n\t};\r\n\t\r\n\talias(AccountSummaries.prototype, 'allWebProperties',\r\n\t                                  'allProperties');\r\n\t\r\n\t\r\n\t/**\r\n\t * Return a list of all profiles this user has access to.\r\n\t * @return {Array}\r\n\t */\r\n\tAccountSummaries.prototype.allProfiles = function() {\r\n\t  return this.profiles_;\r\n\t};\r\n\t\r\n\talias(AccountSummaries.prototype, 'allProfiles',\r\n\t                                  'allViews');\r\n\t\r\n\t\r\n\t/**\r\n\t * Returns an account, web property or profile given the passed ID in the\r\n\t * `idData` object.  The ID data object can contain only one of the\r\n\t * following properties: \"accountId\", \"webPropertyId\", \"propertyId\",\r\n\t * \"profileId\", or \"viewId\".  If more than one key is passed, an error is\r\n\t * thrown.\r\n\t *\r\n\t * @param {Object} obj An object with no more than one of the following\r\n\t *     keys: \"accountId\", \"webPropertyId\", \"propertyId\", \"profileId\" or\r\n\t *     \"viewId\".\r\n\t * @return {Object|undefined} The matching account, web property, or\r\n\t *     profile. If none are found, undefined is returned.\r\n\t */\r\n\tAccountSummaries.prototype.get = function(obj) {\r\n\t  if (!!obj.accountId +\r\n\t      !!obj.webPropertyId +\r\n\t      !!obj.propertyId +\r\n\t      !!obj.profileId +\r\n\t      !!obj.viewId > 1) {\r\n\t\r\n\t    throw new Error('get() only accepts an object with a single ' +\r\n\t        'property: either \"accountId\", \"webPropertyId\", \"propertyId\", ' +\r\n\t        '\"profileId\" or \"viewId\"');\r\n\t  }\r\n\t  return this.getProfile(obj.profileId || obj.viewId) ||\r\n\t      this.getWebProperty(obj.webPropertyId || obj.propertyId) ||\r\n\t      this.getAccount(obj.accountId);\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * Get an account given its ID.\r\n\t * @param {string|number} accountId\r\n\t * @return {Object} The account with the given ID.\r\n\t */\r\n\tAccountSummaries.prototype.getAccount = function(accountId) {\r\n\t  return this.accountsById_[accountId] &&\r\n\t      this.accountsById_[accountId].self;\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * Get a web property given its ID.\r\n\t * @param {string} webPropertyId\r\n\t * @return {Object} The web property with the given ID.\r\n\t */\r\n\tAccountSummaries.prototype.getWebProperty = function(webPropertyId) {\r\n\t  return this.webPropertiesById_[webPropertyId] &&\r\n\t      this.webPropertiesById_[webPropertyId].self;\r\n\t};\r\n\t\r\n\talias(AccountSummaries.prototype, 'getWebProperty',\r\n\t                                  'getProperty');\r\n\t\r\n\t\r\n\t/**\r\n\t * Get a profile given its ID.\r\n\t * @param {string|number} profileId\r\n\t * @return {Object} The profile with the given ID.\r\n\t */\r\n\tAccountSummaries.prototype.getProfile = function(profileId) {\r\n\t  return this.profilesById_[profileId] &&\r\n\t      this.profilesById_[profileId].self;\r\n\t};\r\n\t\r\n\talias(AccountSummaries.prototype, 'getProfile',\r\n\t                                  'getView');\r\n\t\r\n\t\r\n\t/**\r\n\t * Get an account given the ID of one of its profiles.\r\n\t * @param {string|number} profileId\r\n\t * @return {Object} The account containing this profile.\r\n\t */\r\n\tAccountSummaries.prototype.getAccountByProfileId = function(profileId) {\r\n\t  return this.profilesById_[profileId] &&\r\n\t      this.profilesById_[profileId].grandParent;\r\n\t};\r\n\t\r\n\t\r\n\talias(AccountSummaries.prototype, 'getAccountByProfileId',\r\n\t                                  'getAccountByViewId');\r\n\t\r\n\t\r\n\t\r\n\t/**\r\n\t * Get a web property given the ID of one of its profile.\r\n\t * @param {string|number} profileId\r\n\t * @return {Object} The web property containing this profile.\r\n\t */\r\n\tAccountSummaries.prototype.getWebPropertyByProfileId = function(profileId) {\r\n\t  return this.profilesById_[profileId] &&\r\n\t      this.profilesById_[profileId].parent;\r\n\t};\r\n\t\r\n\talias(AccountSummaries.prototype, 'getWebPropertyByProfileId',\r\n\t                                  'getPropertyByViewId');\r\n\t\r\n\t\r\n\t/**\r\n\t * Get an account given the ID of one of its web properties.\r\n\t * @param {string|number} webPropertyId\r\n\t * @return {Object} The account containing this web property.\r\n\t */\r\n\tAccountSummaries.prototype.getAccountByWebPropertyId = function(webPropertyId) {\r\n\t  return this.webPropertiesById_[webPropertyId] &&\r\n\t      this.webPropertiesById_[webPropertyId].parent;\r\n\t};\r\n\t\r\n\talias(AccountSummaries.prototype, 'getAccountByWebPropertyId',\r\n\t                                  'getAccountByPropertyId');\r\n\t\r\n\t\r\n\t/**\r\n\t * Alias a property of an object using es5 getters. If es5 getters are not\r\n\t * supported, just add the aliased property directly to the object.\r\n\t * @param {Object} object The object for which you want to alias properties.\r\n\t * @param {string} referenceProp The reference property.\r\n\t * @param {string} aliasName The reference property's alias name.\r\n\t */\r\n\tfunction alias(object, referenceProp, aliasName) {\r\n\t  if (Object.defineProperty) {\r\n\t    Object.defineProperty(object, aliasName, {\r\n\t      get: function() {\r\n\t        return object[referenceProp];\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t  else {\r\n\t    object[aliasName] = object[referenceProp];\r\n\t  }\r\n\t}\r\n\t\r\n\t\r\n\tmodule.exports = AccountSummaries;\r\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** view-selector2.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d174118c06f57b4bedd7\n **/","// Copyright 2014 Google Inc. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\n\r\n/* global gapi */\r\n\r\nimport accountSummaries from 'javascript-api-utils/lib/account-summaries';\r\n\r\n/**\r\n * A ViewSelector2 component for the Embed API.\r\n */\r\ngapi.analytics.ready(function() {\r\n\r\n  gapi.analytics.createComponent('ViewSelector2', {\r\n\r\n    /**\r\n     * Render the view selector instance on the page or update an existing\r\n     * instance if any options have changed.\r\n     * @return {ViewSelector2} The instance.\r\n     */\r\n    execute: function() {\r\n      this.setup_(function() {\r\n        this.updateAccounts_();\r\n        if (this.changed_) {\r\n          this.render_();\r\n          this.onChange_();\r\n        }\r\n      }.bind(this));\r\n\r\n      return this;\r\n    },\r\n\r\n    /**\r\n     * Extend the base `set` function with some error checking and handling of\r\n     * ID data.\r\n     * @extends gapi.analytics.Component.prototype.set\r\n     * @param {Object} opts The options to set.\r\n     * @return {ViewSelector2}\r\n     */\r\n    set: function(opts) {\r\n\r\n      if (!!opts.ids +\r\n          !!opts.viewId +\r\n          !!opts.propertyId +\r\n          !!opts.accountId > 1) {\r\n\r\n        throw new Error('You cannot specify more than one of the following ' +\r\n            'options: \"ids\", \"viewId\", \"accountId\", \"propertyId\"');\r\n      }\r\n\r\n      if (opts.container && this.container) {\r\n        throw new Error('You cannot change containers once a view selector ' +\r\n            'has been rendered on the page.');\r\n      }\r\n\r\n      var prevOpts = this.get();\r\n\r\n      if (prevOpts.ids != opts.ids ||\r\n          prevOpts.viewId != opts.viewId ||\r\n          prevOpts.propertyId != opts.propertyId ||\r\n          prevOpts.accountId != opts.accountId) {\r\n\r\n        // If new ID data is being set, first unset all existing ID data.\r\n        // This prevents the problem where you set an account ID then set a\r\n        // view ID for a new view in a different account. Both IDs should not\r\n        // persist or there will be problems.\r\n        prevOpts.ids = null;\r\n        prevOpts.viewId = null;\r\n        prevOpts.propertyId = null;\r\n        prevOpts.accountId = null;\r\n      }\r\n\r\n      // Call super.\r\n      return gapi.analytics.Component.prototype.set.call(this, opts);\r\n    },\r\n\r\n    /**\r\n     * Set up the view selector instance with values from the Management API's\r\n     * accountSummaries.list method via the `accountSummaries` module.\r\n     * If the user has not authorized, wait until that happens before\r\n     * requesting the account summaries.\r\n     * @param {Function} cb A function to be invoked once authorization has\r\n     *     succeeded and the accountSummaries have been retrieved.\r\n     */\r\n    setup_: function(cb) {\r\n      var self = this;\r\n\r\n      function onAuthorize() {\r\n        accountSummaries.get().then(\r\n          function(summaries) {\r\n            self.summaries = summaries;\r\n            self.accounts = self.summaries.all();\r\n            cb();\r\n          },\r\n          function(err) {\r\n            self.emit('error', err);\r\n          }\r\n        );\r\n      }\r\n\r\n      if (gapi.analytics.auth.isAuthorized()) {\r\n        onAuthorize();\r\n      }\r\n      else {\r\n        gapi.analytics.auth.on('success', onAuthorize);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Update the view selector instance properties with new account\r\n     * information.\r\n     * @throws {Error} If the user has set an ID value for an account they\r\n     *     don't have access to.\r\n     */\r\n    updateAccounts_: function() {\r\n\r\n      var opts = this.get();\r\n      var ids = getIdProp(opts);\r\n      var view, account, property;\r\n\r\n      // If there are no id props, set the defaults.\r\n      if (!ids) {\r\n        account = this.accounts[0];\r\n        property = account && account.properties && account.properties[0];\r\n        view = property && property.views && property.views[0];\r\n      }\r\n      else {\r\n        switch (ids.prop) {\r\n          case 'viewId':\r\n            view = this.summaries.getProfile(ids.value);\r\n            account = this.summaries.getAccountByProfileId(ids.value);\r\n            property = this.summaries.getWebPropertyByProfileId(ids.value);\r\n            break;\r\n          case 'propertyId':\r\n            property = this.summaries.getWebProperty(ids.value);\r\n            account = this.summaries.getAccountByWebPropertyId(ids.value);\r\n            view = property && property.views && property.views[0];\r\n            break;\r\n          case 'accountId':\r\n            account = this.summaries.getAccount(ids.value);\r\n            property = account && account.properties && account.properties[0];\r\n            view = property && property.views && property.views[0];\r\n            break;\r\n        }\r\n      }\r\n\r\n      if (account || property || view) {\r\n\r\n        // Only update if something has changed.\r\n        if (account != this.account ||\r\n            property != this.property ||\r\n            view != this.view) {\r\n\r\n          // Store what value changed.\r\n          this.changed_ = {\r\n            account: account && account != this.account,\r\n            property: property && property != this.property,\r\n            view: view && view != this.view\r\n          };\r\n\r\n          this.account = account;\r\n          this.properties = account.properties;\r\n          this.property = property;\r\n          this.views = property && property.views;\r\n          this.view = view;\r\n          this.ids = view && 'ga:' + view.id;\r\n        }\r\n      }\r\n      else {\r\n        this.emit('error', new Error('You do not have access to ' +\r\n            ids.prop.slice(0, -2) + ' : ' + ids.value));\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Render the view selector based on the users accounts and the\r\n     * pre-defined template. Also add event handlers to watch for\r\n     * changes.\r\n     */\r\n    render_: function() {\r\n\r\n      var opts = this.get();\r\n\r\n      this.container = typeof opts.container == 'string' ?\r\n          document.getElementById(opts.container) : opts.container;\r\n\r\n      this.container.innerHTML = opts.template || this.template;\r\n      var selects = this.container.querySelectorAll('select');\r\n\r\n      var accounts = this.accounts;\r\n      var properties = this.properties || [{name: '(Empty)', id: ''}];\r\n      var views = this.views || [{name: '(Empty)', id: ''}];\r\n\r\n      updateSelect(selects[0], accounts, this.account.id);\r\n      updateSelect(selects[1], properties, this.property && this.property.id);\r\n      updateSelect(selects[2], views, this.view && this.view.id);\r\n\r\n      selects[0].onchange =\r\n          this.onUserSelect_.bind(this, selects[0], 'accountId');\r\n      selects[1].onchange =\r\n          this.onUserSelect_.bind(this, selects[1], 'propertyId');\r\n      selects[2].onchange =\r\n          this.onUserSelect_.bind(this, selects[2], 'viewId');\r\n    },\r\n\r\n    /**\r\n     * A callback that is invoked from the `execute` method whenever the ID\r\n     * data has changed. Most of the time this change happens when the user\r\n     * has selected a new view in the UI, but it can also happen\r\n     * programmatically via the `set` method.\r\n     */\r\n    onChange_: function() {\r\n\r\n      var props = {\r\n        account: this.account,\r\n        property: this.property,\r\n        view: this.view,\r\n        ids: this.view && 'ga:' + this.view.id\r\n      };\r\n\r\n      if (this.changed_) {\r\n        if (this.changed_.account) this.emit('accountChange', props);\r\n        if (this.changed_.property) this.emit('propertyChange', props);\r\n        if (this.changed_.view) {\r\n          this.emit('viewChange', props);\r\n          this.emit('idsChange', props);\r\n\r\n          // For backwards compatibility with the original ViewSelector.\r\n          this.emit('change', props.ids);\r\n        }\r\n      }\r\n\r\n      this.changed_ = null;\r\n    },\r\n\r\n    /**\r\n     * The handler assigned to the `onchange` method of each of the select\r\n     * elements. The context is bound to the view selector instance and it is\r\n     * invoked with the element and property as its arguments.\r\n     * @param {HTMLSelectElement} select The select element.\r\n     * @param {string} property The property key to be set on the instance.\r\n     */\r\n    onUserSelect_: function(select, property) {\r\n      var data = {};\r\n      data[property] = select.value;\r\n\r\n      this.set(data);\r\n      this.execute();\r\n    },\r\n\r\n    /**\r\n     * The html structure used to build the component. Developers can override\r\n     * this by passing it to the component constructor.  The only requirement\r\n     * is that the structure contain three selects.  The first will be the\r\n     * account select, the second will be the property select, and the third\r\n     * will be the view select. Order is important.\r\n     */\r\n    template:\r\n      '<div class=\"ViewSelector2\">' +\r\n      '  <div class=\"ViewSelector2-item\">' +\r\n      '    <label>Account</label>' +\r\n      '    <select class=\"FormField\"></select>' +\r\n      '  </div>' +\r\n      '  <div class=\"ViewSelector2-item\">' +\r\n      '    <label>Property</label>' +\r\n      '    <select class=\"FormField\"></select>' +\r\n      '  </div>' +\r\n      '  <div class=\"ViewSelector2-item\">' +\r\n      '    <label>View</label>' +\r\n      '    <select class=\"FormField\"></select>' +\r\n      '  </div>' +\r\n      '</div>'\r\n  });\r\n\r\n\r\n  /**\r\n   * Update a select with the specified options and optionally choose the\r\n   * selected option based on the matching ID.\r\n   * @param {HTMLSelectElement} select The select element to update.\r\n   * @param {Array} options An Array of objects with the keys\r\n   *     `name` and `id`.\r\n   * @param {string} [id] An optional value used to determine the selected\r\n   *     option.\r\n   */\r\n  function updateSelect(select, options, id) {\r\n    select.innerHTML = options.map(function(option) {\r\n      var selected = option.id == id ? 'selected ' : ' ';\r\n      return '<option ' + selected + 'value=\"' + option.id + '\">' +\r\n          option.name + '</option>';\r\n    }).join('');\r\n  }\r\n\r\n\r\n  /**\r\n   * Given an options object containing a single key that could be either\r\n   * \"ids\", \"viewId\", \"propertyId\", or \"accountId\", return a new object\r\n   * specifying that key in its `prop` property. If the passed property is\r\n   * \"ids\" convert it to \"viewId\".\r\n   * @param {Object} opts An options object.\r\n   * @return {Object} An object specifying what ID property and value were\r\n   *     passed.\r\n   */\r\n  function getIdProp(opts) {\r\n    if (opts.ids || opts.viewId) {\r\n      return {prop: 'viewId', value: opts.viewId ||\r\n          (opts.ids && opts.ids.replace(/^ga:/, ''))};\r\n    }\r\n    else if (opts.propertyId) {\r\n      return {prop: 'propertyId', value: opts.propertyId};\r\n    }\r\n    else if (opts.accountId) {\r\n      return {prop: 'accountId', value: opts.accountId};\r\n    }\r\n  }\r\n\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/myGitRepos/ga-dev-tools/src/javascript/embed-api/components/view-selector2.js\n **/","// Copyright 2015 Google Inc. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\n\r\n/* global gapi */\r\n\r\nvar AccountSummaries = require('./account-summaries');\r\n\r\n\r\nvar API_PATH = '/analytics/v3/management/accountSummaries';\r\n\r\n\r\n/**\r\n * Store the accountSummaries result in a promise so the API isn't\r\n * queried unneccesarily.\r\n */\r\nvar cache;\r\n\r\n\r\n/**\r\n * Make a request to the Management API's accountSummaries#list method.\r\n * If the requests returns a partial, paginated response, query again\r\n * until the full summaries are retrieved.\r\n * @return {goog.Promise} A promise that will be resolved with an\r\n *     AccountSummaries instance.\r\n */\r\nfunction requestAccountSummaries() {\r\n\r\n  var promise = gapi.client.request({path: API_PATH})\r\n      // An extra `then` is needed here because `.list` doesn't return a\r\n      // \"real\" promise, just a thenable. Calling `.then` gets us access\r\n      // to the underlying goog.Promise instance and thus its constructor.\r\n      .then(function(resp) { return resp; });\r\n\r\n  return new promise.constructor(function(resolve, reject) {\r\n\r\n    // Store the summaries array in the closure so multiple requests can\r\n    // concat to it.\r\n    var summaries = [];\r\n\r\n    promise.then(function fn(resp) {\r\n      var result = resp.result;\r\n      if (result.items) {\r\n        summaries = summaries.concat(result.items);\r\n      }\r\n      else {\r\n        reject(new Error('You do not have any Google Analytics accounts. ' +\r\n            'Go to http://google.com/analytics to sign up.'));\r\n      }\r\n\r\n      if (result.startIndex + result.itemsPerPage <= result.totalResults) {\r\n        gapi.client.request({\r\n          path: API_PATH,\r\n          params: {\r\n            'start-index': result.startIndex + result.itemsPerPage\r\n          }\r\n        })\r\n        // Recursively call this function until the full results are in.\r\n        .then(fn);\r\n      }\r\n      else {\r\n        resolve(new AccountSummaries(summaries));\r\n      }\r\n    })\r\n    // Reject the promise if there are any uncaught errors;\r\n    .then(null, reject);\r\n  });\r\n}\r\n\r\n\r\n/**\r\n * @module accountSummaries\r\n *\r\n * This module requires the `gapi.client` library to be loaded on the page\r\n * and the user to be authenticated.\r\n */\r\nmodule.exports = {\r\n\r\n  /**\r\n   * Return the `requestAccountSummaries` promise. If the promise exists,\r\n   * return it to avoid multiple requests. If the promise does not exist,\r\n   * initiate the request and cache the promise.\r\n   *\r\n   * @param {boolean} noCache When true make a request no matter what.\r\n   * @return {goog.Promise} A promise fulfilled with an AccountSummaries\r\n   *     instance.\r\n   */\r\n  get: function(noCache) {\r\n    if (noCache) cache = null;\r\n    return cache || (cache = requestAccountSummaries());\r\n  }\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/javascript-api-utils/lib/account-summaries/index.js\n ** module id = 1\n ** module chunks = 2\n **/","// Copyright 2015 Google Inc. All rights reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\n\r\n/**\r\n * @constuctor AccountSummaries\r\n *\r\n * Takes an array of accounts and writes the following new properties:\r\n * `accounts_`, `webProperties_`, `profiles_`, `accountsById_`,\r\n * `webPropertiesById_`, and `profilesById_`.\r\n * Each of the ___ById properties contains an array of objects where the\r\n * key is the entity ID and the value is an object containing the entity and\r\n * the entity's parents. For example, an object in the `profilesById_` array\r\n * might look like this:\r\n *     {\r\n *       \"1234\": {\r\n *         self: {...},\r\n *         parent: {...},\r\n *         grandParent: {...}\r\n *       }\r\n *     }\r\n *\r\n * It also aliases the properties `webProperties` to `properties` and\r\n * `profiles` to `views` within the `accounts` array tree.\r\n\r\n * @param {Array} accounts A list of accounts in the format returned by the\r\n *     management API's accountSummaries#list method.\r\n * @returns {AccountSummaries}\r\n */\r\nfunction AccountSummaries(accounts) {\r\n\r\n  this.accounts_ = accounts;\r\n  this.webProperties_ = [];\r\n  this.profiles_ = [];\r\n\r\n  this.accountsById_ = {};\r\n  this.webPropertiesById_ = this.propertiesById_ = {};\r\n  this.profilesById_ = this.viewsById_ = {};\r\n\r\n  for (var i = 0, account; account = this.accounts_[i]; i++) {\r\n\r\n    this.accountsById_[account.id] = {\r\n      self: account\r\n    };\r\n\r\n    if (!account.webProperties) continue;\r\n\r\n    // Add aliases.\r\n    alias(account, 'webProperties', 'properties');\r\n\r\n    for (var j = 0, webProperty; webProperty = account.webProperties[j]; j++) {\r\n\r\n      this.webProperties_.push(webProperty);\r\n      this.webPropertiesById_[webProperty.id] = {\r\n        self: webProperty,\r\n        parent: account\r\n      };\r\n\r\n      if (!webProperty.profiles) continue;\r\n\r\n      // Add aliases.\r\n      alias(webProperty, 'profiles', 'views');\r\n\r\n      for (var k = 0, profile; profile = webProperty.profiles[k]; k++) {\r\n\r\n        this.profiles_.push(profile);\r\n        this.profilesById_[profile.id] = {\r\n          self: profile,\r\n          parent: webProperty,\r\n          grandParent: account\r\n        };\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Return a list of all accounts this user has access to.\r\n * Since the accounts contain the web properties and the web properties contain\r\n * the profiles, this list contains everything.\r\n * @return {Array}\r\n */\r\nAccountSummaries.prototype.all = function() {\r\n  return this.accounts_;\r\n};\r\n\r\nalias(AccountSummaries.prototype, 'all',\r\n                                  'allAccounts');\r\n\r\n\r\n/**\r\n * Return a list of all web properties this user has access to.\r\n * @return {Array}\r\n */\r\nAccountSummaries.prototype.allWebProperties = function() {\r\n  return this.webProperties_;\r\n};\r\n\r\nalias(AccountSummaries.prototype, 'allWebProperties',\r\n                                  'allProperties');\r\n\r\n\r\n/**\r\n * Return a list of all profiles this user has access to.\r\n * @return {Array}\r\n */\r\nAccountSummaries.prototype.allProfiles = function() {\r\n  return this.profiles_;\r\n};\r\n\r\nalias(AccountSummaries.prototype, 'allProfiles',\r\n                                  'allViews');\r\n\r\n\r\n/**\r\n * Returns an account, web property or profile given the passed ID in the\r\n * `idData` object.  The ID data object can contain only one of the\r\n * following properties: \"accountId\", \"webPropertyId\", \"propertyId\",\r\n * \"profileId\", or \"viewId\".  If more than one key is passed, an error is\r\n * thrown.\r\n *\r\n * @param {Object} obj An object with no more than one of the following\r\n *     keys: \"accountId\", \"webPropertyId\", \"propertyId\", \"profileId\" or\r\n *     \"viewId\".\r\n * @return {Object|undefined} The matching account, web property, or\r\n *     profile. If none are found, undefined is returned.\r\n */\r\nAccountSummaries.prototype.get = function(obj) {\r\n  if (!!obj.accountId +\r\n      !!obj.webPropertyId +\r\n      !!obj.propertyId +\r\n      !!obj.profileId +\r\n      !!obj.viewId > 1) {\r\n\r\n    throw new Error('get() only accepts an object with a single ' +\r\n        'property: either \"accountId\", \"webPropertyId\", \"propertyId\", ' +\r\n        '\"profileId\" or \"viewId\"');\r\n  }\r\n  return this.getProfile(obj.profileId || obj.viewId) ||\r\n      this.getWebProperty(obj.webPropertyId || obj.propertyId) ||\r\n      this.getAccount(obj.accountId);\r\n};\r\n\r\n\r\n/**\r\n * Get an account given its ID.\r\n * @param {string|number} accountId\r\n * @return {Object} The account with the given ID.\r\n */\r\nAccountSummaries.prototype.getAccount = function(accountId) {\r\n  return this.accountsById_[accountId] &&\r\n      this.accountsById_[accountId].self;\r\n};\r\n\r\n\r\n/**\r\n * Get a web property given its ID.\r\n * @param {string} webPropertyId\r\n * @return {Object} The web property with the given ID.\r\n */\r\nAccountSummaries.prototype.getWebProperty = function(webPropertyId) {\r\n  return this.webPropertiesById_[webPropertyId] &&\r\n      this.webPropertiesById_[webPropertyId].self;\r\n};\r\n\r\nalias(AccountSummaries.prototype, 'getWebProperty',\r\n                                  'getProperty');\r\n\r\n\r\n/**\r\n * Get a profile given its ID.\r\n * @param {string|number} profileId\r\n * @return {Object} The profile with the given ID.\r\n */\r\nAccountSummaries.prototype.getProfile = function(profileId) {\r\n  return this.profilesById_[profileId] &&\r\n      this.profilesById_[profileId].self;\r\n};\r\n\r\nalias(AccountSummaries.prototype, 'getProfile',\r\n                                  'getView');\r\n\r\n\r\n/**\r\n * Get an account given the ID of one of its profiles.\r\n * @param {string|number} profileId\r\n * @return {Object} The account containing this profile.\r\n */\r\nAccountSummaries.prototype.getAccountByProfileId = function(profileId) {\r\n  return this.profilesById_[profileId] &&\r\n      this.profilesById_[profileId].grandParent;\r\n};\r\n\r\n\r\nalias(AccountSummaries.prototype, 'getAccountByProfileId',\r\n                                  'getAccountByViewId');\r\n\r\n\r\n\r\n/**\r\n * Get a web property given the ID of one of its profile.\r\n * @param {string|number} profileId\r\n * @return {Object} The web property containing this profile.\r\n */\r\nAccountSummaries.prototype.getWebPropertyByProfileId = function(profileId) {\r\n  return this.profilesById_[profileId] &&\r\n      this.profilesById_[profileId].parent;\r\n};\r\n\r\nalias(AccountSummaries.prototype, 'getWebPropertyByProfileId',\r\n                                  'getPropertyByViewId');\r\n\r\n\r\n/**\r\n * Get an account given the ID of one of its web properties.\r\n * @param {string|number} webPropertyId\r\n * @return {Object} The account containing this web property.\r\n */\r\nAccountSummaries.prototype.getAccountByWebPropertyId = function(webPropertyId) {\r\n  return this.webPropertiesById_[webPropertyId] &&\r\n      this.webPropertiesById_[webPropertyId].parent;\r\n};\r\n\r\nalias(AccountSummaries.prototype, 'getAccountByWebPropertyId',\r\n                                  'getAccountByPropertyId');\r\n\r\n\r\n/**\r\n * Alias a property of an object using es5 getters. If es5 getters are not\r\n * supported, just add the aliased property directly to the object.\r\n * @param {Object} object The object for which you want to alias properties.\r\n * @param {string} referenceProp The reference property.\r\n * @param {string} aliasName The reference property's alias name.\r\n */\r\nfunction alias(object, referenceProp, aliasName) {\r\n  if (Object.defineProperty) {\r\n    Object.defineProperty(object, aliasName, {\r\n      get: function() {\r\n        return object[referenceProp];\r\n      }\r\n    });\r\n  }\r\n  else {\r\n    object[aliasName] = object[referenceProp];\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = AccountSummaries;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/javascript-api-utils/lib/account-summaries/account-summaries.js\n ** module id = 2\n ** module chunks = 2\n **/"],"sourceRoot":""}