<div class="row">
  <div class="small-12 medium-8 columns">
    <h1 class="page_title"><%= ucfirst(t("downloads")) %></h1>
  </div>
  <div class="small-12 medium-4 columns">
    <%= search_form_for @site_elements, url: support_downloads_search_path, method: :post do |f| %>
      <div class="row collapse">
        <div class="small-9 columns">
          <%= f.text_field :name_or_resource_file_name_or_executable_file_name_or_resource_type_or_content_cont %>
        </div>
        <div class="small-3 columns">
          <%= f.submit "Search", class: "button postfix" %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<div class="row download_nav">
  <div class="medium-3 small-12 columns">
    <ul class="side-nav">
      <li <% if params[:view_by] == "products" %>class="active"<% end %>>
        <%= link_to "View by Product", selected_downloads_by_product_path, class: "c2spinner", remote: true %>
      </li>
      <li <% if params[:view_by] == "download_types" %>class="active"<% end %>>
        <%= link_to "View by Download Type", selected_downloads_by_type_path, class: "c2spinner", remote: true %>
      </li>
      <!--
      <li><%= link_to "View by Language", view_by: "languages" %></li>
      -->
      <% if website.has_software? && (website.current_softwares.length > 0 || website.forced_current_softwares.length > 0) %>
        <li>
          <%= link_to softwares_path do %>
            <%= t(:software).titleize %>
            <%= image_tag("icons/external_link_icon.png") %>
          <% end %>
        </li>
      <% end %>
    </ul>

    <div class="alert-box info hide-for-small">
      Note: some browsers hide scrollbars until you begin scrolling.
      If you don't see scrollbars on these panels, position your mouse
      over a panel and scroll with your mouse wheel. Or use two fingers
      on most touchpads and touchscreens.
    </div>
  </div>

  <div class="medium-4 large-3 small-12 columns middle" id="column2" data-loading="<%= image_path('loading.gif') %>">
    <% if @products %>
      <%= render_partial "downloads_product_list" %>
    <% elsif @download_types %>
      <%= render_partial "downloads_type_list" %>
    <% elsif @languages %>
      <% @languages.each do |language| %>
        <ul>
          <li><%= link_to language[:name], { view_by: "languages", selected_object: language[:id] } %></li>
        </ul>
      <% end %>
    <% end %>
  </div>

  <div class="medium-5 large-6 small-12 columns downloads" id="column3">
    <% if @product %>
      <%= render_partial "downloads_by_product" %>
    <% end %>

    <% if @download_type %>
      <%= render_partial "downloads_by_type" %>
    <% end %>

    <% if @language %>
      <ul>
        <li>downloads for language appear</li>
      </ul>
    <% end %>

  </div>
</div>

<br/>
<div class="row">
  <div class="small-12 columns">
    <h3>Recent Uploads</h3>
    <table style="width: 100%">
      <thead>
        <tr>
          <td>Filename</td>
          <td>Version</td>
          <td>Language</td>
          <td>Size</td>
          <td>Uploaded</td>
        </tr>
      </thead>
      <tbody>
        <%= cache ["recent-uploads", website, I18n.locale, Date.today] do %>
          <% website.brand.site_elements.where(show_on_public_site: true).order("created_at DESC").limit(40).group_by(&:resource_type).each do |resource_type, site_elements| %>
            <%= downloads_header_row(resource_type, site_elements, columns: 5) %>
            <% site_elements.each do |site_element| %>
              <%= render_partial 'shared/download_table_row', item: site_element %>
            <% end %>
          <% end %>
        <% end %>
      </tbody>
    </table>

  </div>
</div>
