<%= form_tag [:product_selector, @product_family], remote: true, id: "filters" do %>
  <% @product_family.product_filters.each do |product_filter| %>
    <h3><%= product_filter.name %></h3>

    <% if product_filter.is_boolean?%>
      <%= label_tag do %>
        <%= check_box_tag "filter_#{product_filter.to_param}", true, false %> Yes
      <% end %>

      <%= label_tag do %>
        <%= check_box_tag "filter_#{product_filter.to_param}", false, false %> No
      <% end %>

    <% elsif product_filter.is_number? %>
      <%= product_filter.min_value.present? ? product_filter.min_value : "0" %>
      &lt;----&gt;
      <%= product_filter.max_value.present? ? product_filter.max_value : "gazillion" %>
      <%= product_filter.uom if product_filter.uom.present? %>

    <% elsif product_filter.is_string? %>
      <% product_filter.unique_values_for(@product_family).each do |val| %>
        <%= label_tag do %>
          <%= check_box_tag "filter_#{product_filter.to_param}[]", val %> <%= val %>
        <% end %>
      <% end %>
    <% end %>

  <% end %>

  <% if @product_family.product_filters.length == 0 && @product_family.children_with_current_products(website).length > 0 %>
    <h3>Sub-categories</h3>
    <% @product_family.children_with_current_products(website).sort_by(&:name).each do |sub_family| %>
      <%= label_tag do %>
        <%= check_box_tag "sub_family[]", sub_family.id, false, id: sub_family.to_param %>
        <%= sub_family.name.gsub(/\s?Products$/i, "").gsub(/SERIES/i, "Series") %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
