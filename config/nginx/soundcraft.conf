server {
  listen 80;
  server_name soundcraft.com soundcraft.co.uk www.soundcraft.co.uk usa.soundcraft.com;
  return 301 https://www.soundcraft.com$request_uri;
}

# New soundcraft site
server {
    listen 80;
    # swap the comments on the next two lines to launch the new site:
    #server_name soundcraft.hprosandbox.com;
    server_name www.soundcraft.com;

    include "/etc/nginx/security.conf";
    root /var/www/brandsites/current/public;
    access_log  /var/log/nginx/soundcraft-access.log;
    error_log /var/log/nginx/soundcraft-error.log;
    sendfile on;


    location = /favicon.ico {
      alias /var/www/brandsites/current/public/soundcraft.ico;
    }
    location = /logo.png {
      proxy_pass http://d92e2d4def4ad9ded9c8-e33f4b22204b900070d3db62d0c33a2c.r80.cf2.rackcdn.com/soundcraft.png;
    }

    # This was how we ran the old SDA as a separate rails app
    location ~ ^/sda(/.*|$) {
      alias /var/www/soundcraft/sda/public$1;
      client_max_body_size 600M;
      sendfile on;
      passenger_app_root /var/www/soundcraft/sda;
      passenger_document_root /var/www/soundcraft/sda/public;
      passenger_base_uri /sda;
      passenger_enabled on;
      break;
    }
    # Redirect SDA requests to the DAM
    #location ~ ^/sda(/.*|$) {
    #  return 301 https://harman.widencollective.com/;
    #}

    location ^~ /ui-demo {
      alias /var/www/brandsites/static/soundcraft/ui-demo/;
    }
    location /ui24demo {
      alias /var/www/brandsites/static/soundcraft/ui24demo;
    }
    location /ui24-software-demo {
      alias /var/www/brandsites/static/soundcraft/ui24-software-demo;
    }
    location /Soundcraft_Vistonics_Web_Demo {
      alias /var/www/brandsites/static/soundcraft/Soundcraft_Vistonics_Web_Demo;
    }

    include "/etc/nginx/common.conf";

    location ~* ^/applications.* { return 301 $scheme://$http_host/en/; }
    location ~* ^/apps.* { return 301 $scheme://$http_host/en/product_families/mobile-apps; }
    location ~* ^/contacts/buy.* { return 301 $scheme://$http_host/en/where_to_buy; }
    location ~* ^/contacts/distributors.* { return 301 $scheme://$http_host/en/where_to_buy; }
    location ~* ^/contacts/us_.* { return 301 $scheme://$http_host/en/where_to_buy; }
    location ~* ^/contacts/distributors.* { return 301 $scheme://$http_host/en/where_to_buy; }
    location ~* ^/where-to-buy.* { return 301 $scheme://$http_host/en/where_to_buy; }
    location ~* ^/contacts/.* { return 301 $scheme://$http_host/en/support; }
    location ~* ^/support/contact.* { return 301 $scheme://$http_host/en/support; }

    location ~* ^/distributors { return 301 $scheme://$http_host/sda; }

    location ~* ^/downloads { return 301 $scheme://$http_host/en/support_downloads; }

    location ~* ^/imprint.* { return 301 $scheme://$http_host/soundcraft-imprint; }
    location ~* ^/legal.* { return 301 $scheme://$http_host/soundcraft-legal; }
    location ~* ^/news/careers.* { return 301 $scheme://jobs.harman.com/; }
    location ~* ^/careers.* { return 301 $scheme://jobs.harman.com/; }
    location ~* ^/privacy.* { return 301 $scheme://$http_host/en/privacy_policy.html; }

    location ~* ^/support/brochure_request.* { return 301 $scheme://$http_host/en/support; }
    location ~* ^/support/findmyserial.* { return 301 $scheme://$http_host/en/support; }
    location ~* ^/support/gtm.* { return 301 $scheme://$http_host/en/; }
    location ~* ^/support/guides.* { return 301 $scheme://$http_host/en/support_downloads; }
    location ~* ^/support/knowledgebase.* { return 301 $scheme://$http_host/en/support; }
    location ~* ^/support/mailing_list.* { return 301 $scheme://$http_host/en/; }
    location ~* ^/support/product_registration.* { return 301 $scheme://$http_host/en/support/warranty_registration; }
    location ~* ^/support/product-registration.* { return 301 $scheme://$http_host/en/support/warranty_registration; }
    location ~* ^/support/psu_lookup.* { return 301 $scheme://$http_host/en/support; }
    location ~* ^/support/spare_parts.* { return 301 $scheme://$http_host/en/support/parts; }
    location ~* ^/support/studio_tools.* { return 301 $scheme://$http_host/en/tools/calculators; }
    location ~* ^/support/uk_support.* { return 301 $scheme://$http_host/en/support; }
    location ~* ^/support/us_support.* { return 301 $scheme://$http_host/en-US/support; }
    location ~* ^/tech-support.* { return 301 $scheme://$http_host/en/support; }
    location ~* ^/support/videos.* { return 301 $scheme://$http_host/en/videos; }
    location ~* ^/videos.* { return 301 $scheme://$http_host/en/videos; }
    location ~* ^/support/warranty.aspx { return 301 $scheme://$http_host/en/support/warranty_policy; }
    location ~* ^/support/white_papers.* { return 301 $scheme://$http_host/en/support_downloads; }

    location ~* ^/news/soundcraft.* { return 301 $scheme://$http_host/about-soundcraft; }
    location ~* ^/news/tradeshow.* { return 301 $scheme://$http_host/en/events; }
    location ~* ^/news.* { return 301 $scheme://$http_host/en/news; }

    location ~* ^/products/archived.* { return 301 $scheme://$http_host/en/discontinued_products; }
    location ~* ^/products/legacy-products.* { return 301 $scheme://$http_host/en/discontinued_products; }
    location ~* ^/products/discontinued.* { return 301 $scheme://$http_host/en/discontinued_products; }
    location ~* ^/products/dimms.* { return 301 $scheme://$http_host/en/product_families; }
    location ~* ^/products/knowledgebase.* { return 301 $scheme://$http_host/en/support; }
    location ~* ^/products/product_extra.* { return 301 $scheme://$http_host/en/product_families; }
    location ~* ^/products/software.* { return 301 $scheme://$http_host/en/softwares; }
    location ~* ^/products/tips.* { return 301 $scheme://$http_host/en/support; }
    location ~* ^/products/videos.* { return 301 $scheme://$http_host/en/videos; }
    location ~* ^/products/virtualsi.* { return 301 $scheme://$http_host/en/product_families/si-series; }
    location ~* ^/products/vm2.* { return 301 $scheme://$http_host/en/product_families; }

    location ~* ^/products/product_cat.* { return 301 $scheme://$http_host/en/product_families; }
    location ~* ^/products/product.* { return 301 $scheme://$http_host/en/product_families; }

    location ~* ^/products/mixing-consoles { return 301 $scheme://$http_host/en/product_families/mixing-consoles; }
    location ~* ^/products/stageboxes { return 301 $scheme://$http_host/en/product_families/stageboxes; }
    location ~* ^/products/option-cards { return 301 $scheme://$http_host/en/product_families/option-cards; }
    location ~* ^/products/recording-interfaces { return 301 $scheme://$http_host/en/product_families/soundcraft-recording-interfaces; }
    location ~* ^/products/plugins { return 301 $scheme://$http_host/en/product_families/soundcraft-plugins; }
    location ~* ^/products/mobile-apps { return 301 $scheme://$http_host/en/product_families/mobile-apps; }
    location ~* ^/products/mixing-consoles/vi-series { return 301 $scheme://$http_host/en/product_families/vi-series; }
    location ~* ^/products/mixing-consoles/si-series { return 301 $scheme://$http_host/en/product_families/si-series; }
    location ~* ^/products/mixing-consoles/ui-series { return 301 $scheme://$http_host/en/product_families/ui-series; }
    location ~* ^/products/mixing-consoles/signature-series { return 301 $scheme://$http_host/en/product_families/signature-series; }
    location ~* ^/products/mixing-consoles/signature-mtk-series { return 301 $scheme://$http_host/en/product_families/signature-mtk-series; }
    location ~* ^/products/mixing-consoles/gb-series { return 301 $scheme://$http_host/en/product_families/gb-series; }
    location ~* ^/products/mixing-consoles/epm-efx-mpm-mfx { return 301 $scheme://$http_host/en/product_families; }
    location ~* ^/products/mixing-consoles/china-only { return 301 $scheme://$http_host/en/product_families/china-only; }
    location ~* ^/products/mixing-consoles/multi-purpose { return 301 $scheme://$http_host/en/product_families/multi-purpose; }
    location ~* ^/products/recording-interfaces/signature-mtk-series { return 301 $scheme://$http_host/en/product_families/signature-mtk-series; }


    location ~* ^/serve-me-this.* { return 301 $scheme://$http_host/sda$request_uri; }

}

